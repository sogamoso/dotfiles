#!/usr/bin/env bash
set -euo pipefail

REPO_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

case "$(uname -s)" in
  Darwin)
    bash "$REPO_DIR/install/omamac.sh"
    bash "$REPO_DIR/install/macos.sh"
    ;;
  *)
    echo "Unsupported OS"
    exit 1
    ;;
esac

# Stow personal configs (restores anything Omamac/Omarchy overwrote)
bash "$REPO_DIR/install/stow.sh"

# Tailscale
if ! tailscale status &>/dev/null; then
  echo "Tailscale is not connected. Run: tailscale up --ssh"
fi

exec zsh -l
