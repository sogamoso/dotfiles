#!/usr/bin/env bash
set -euo pipefail

REPO_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# OS specific
case "$(uname -s)" in
  Darwin)
    bash "$REPO_DIR/install/macos/all.sh"
    ;;
  *)
    echo "Unsupported OS"
    exit 1
    ;;
esac

# Stow personal configs
bash "$REPO_DIR/install/stow.sh"

# Tailscale
if ! tailscale status &>/dev/null; then
  echo "Tailscale is not connected. Run: tailscale up --ssh"
fi

exec zsh -l
